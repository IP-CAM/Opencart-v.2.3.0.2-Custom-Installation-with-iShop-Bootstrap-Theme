function getURLVar(t){var e=[],o=document.location.search.split("?");if(o[1]){var a=o[1].split("&");for(i=0;i<a.length;i++){var r=a[i].split("=");r[0]&&r[1]&&(e[r[0]]=r[1])}return e[t]?e[t]:""}}$(document).ready(function(){$(".text-danger").each(function(){var t=$(this).parent().parent();t.hasClass("form-group")&&t.addClass("has-error")}),$("#form-currency .currency-select").on("click",function(t){t.preventDefault(),$("#form-currency input[name='code']").val($(this).attr("name")),$("#form-currency").submit()}),$("#form-language .language-select").on("click",function(t){t.preventDefault(),$("#form-language input[name='code']").val($(this).attr("name")),$("#form-language").submit()}),$("#search input[name='search']").parent().find("button.btn").on("click",function(){var t=$("base").attr("href")+"index.php?route=product/search",e=$("#search input[name='search']").val();e&&(t+="&search="+encodeURIComponent(e)),location=t}),$("#search input[name='search']").on("keydown",function(t){13==t.keyCode&&$("header #search input[name='search']").parent().find("button").trigger("click")}),$("#menu .dropdown-menu").each(function(){var t=$("#menu").offset(),e=$(this).parent().offset().left+$(this).outerWidth()-(t.left+$("#menu").outerWidth());0<e&&$(this).css("margin-left","-"+(e+10)+"px")}),$("#list-view").click(function(){$("#content .product-grid > .clearfix").remove(),$("#content .row > .product-grid").attr("class","product-layout product-list col-xs-12"),$("#grid-view").removeClass("active"),$("#list-view").addClass("active"),localStorage.setItem("display","list")}),$("#grid-view").click(function(){var t=$("#column-right, #column-left").length;2==t?$("#content .product-list").attr("class","product-layout product-grid col-lg-6 col-md-6 col-sm-12 col-xs-12"):1==t?$("#content .product-list").attr("class","product-layout product-grid col-lg-4 col-md-4 col-sm-6 col-xs-12"):$("#content .product-list").attr("class","product-layout product-grid col-lg-3 col-md-3 col-sm-6 col-xs-12"),$("#list-view").removeClass("active"),$("#grid-view").addClass("active"),localStorage.setItem("display","grid")}),"list"==localStorage.getItem("display")?($("#list-view").trigger("click"),$("#list-view").addClass("active")):($("#grid-view").trigger("click"),$("#grid-view").addClass("active")),$(document).on("keydown","#collapse-checkout-option input[name='email'], #collapse-checkout-option input[name='password']",function(t){13==t.keyCode&&$("#collapse-checkout-option #button-login").trigger("click")}),$("[data-toggle='tooltip']").tooltip({container:"body",trigger:"hover"}),$(document).ajaxStop(function(){$("[data-toggle='tooltip']").tooltip({container:"body"})})});var cart={add:function(t,e){$.ajax({url:"index.php?route=checkout/cart/add",type:"post",data:"product_id="+t+"&quantity="+(void 0!==e?e:1),dataType:"json",beforeSend:function(){$("#cart > button").button("loading")},complete:function(){$("#cart > button").button("reset")},success:function(t){$(".alert, .text-danger").remove(),t.redirect&&(location=t.redirect),t.success&&($("#content").parent().before('<div class="alert alert-success"><i class="fa fa-check-circle"></i> '+t.success+' <button type="button" class="close" data-dismiss="alert">&times;</button></div>'),setTimeout(function(){$("#cart > button").html('<span id="cart-total"><i class="fa fa-shopping-cart"></i> '+t.total+"</span>")},100),$("html, body").animate({scrollTop:0},"slow"),$("#cart > ul").load("index.php?route=common/cart/info ul li"))},error:function(t,e,o){alert(o+"\r\n"+t.statusText+"\r\n"+t.responseText)}})},update:function(t,e){$.ajax({url:"index.php?route=checkout/cart/edit",type:"post",data:"key="+t+"&quantity="+(void 0!==e?e:1),dataType:"json",beforeSend:function(){$("#cart > button").button("loading")},complete:function(){$("#cart > button").button("reset")},success:function(t){setTimeout(function(){$("#cart > button").html('<span id="cart-total"><i class="fa fa-shopping-cart"></i> '+t.total+"</span>")},100),"checkout/cart"==getURLVar("route")||"checkout/checkout"==getURLVar("route")?location="index.php?route=checkout/cart":$("#cart > ul").load("index.php?route=common/cart/info ul li")},error:function(t,e,o){alert(o+"\r\n"+t.statusText+"\r\n"+t.responseText)}})},remove:function(t){$.ajax({url:"index.php?route=checkout/cart/remove",type:"post",data:"key="+t,dataType:"json",beforeSend:function(){$("#cart > button").button("loading")},complete:function(){$("#cart > button").button("reset")},success:function(t){setTimeout(function(){$("#cart > button").html('<span id="cart-total"><i class="fa fa-shopping-cart"></i> '+t.total+"</span>")},100);var e=String(document.location.pathname);"/cart/"==e||"/checkout/"==e||"checkout/cart"==getURLVar("route")||"checkout/checkout"==getURLVar("route")?location="index.php?route=checkout/cart":$("#cart > ul").load("index.php?route=common/cart/info ul li")},error:function(t,e,o){alert(o+"\r\n"+t.statusText+"\r\n"+t.responseText)}})}},voucher={add:function(){},remove:function(t){$.ajax({url:"index.php?route=checkout/cart/remove",type:"post",data:"key="+t,dataType:"json",beforeSend:function(){$("#cart > button").button("loading")},complete:function(){$("#cart > button").button("reset")},success:function(t){setTimeout(function(){$("#cart > button").html('<span id="cart-total"><i class="fa fa-shopping-cart"></i> '+t.total+"</span>")},100),"checkout/cart"==getURLVar("route")||"checkout/checkout"==getURLVar("route")?location="index.php?route=checkout/cart":$("#cart > ul").load("index.php?route=common/cart/info ul li")},error:function(t,e,o){alert(o+"\r\n"+t.statusText+"\r\n"+t.responseText)}})}},wishlist={add:function(t){$.ajax({url:"index.php?route=account/wishlist/add",type:"post",data:"product_id="+t,dataType:"json",success:function(t){$(".alert").remove(),t.redirect&&(location=t.redirect),t.success&&$("#content").parent().before('<div class="alert alert-success"><i class="fa fa-check-circle"></i> '+t.success+' <button type="button" class="close" data-dismiss="alert">&times;</button></div>'),$("#wishlist-total span").html(t.total),$("#wishlist-total").attr("title",t.total),$("html, body").animate({scrollTop:0},"slow")},error:function(t,e,o){alert(o+"\r\n"+t.statusText+"\r\n"+t.responseText)}})},remove:function(){}},compare={add:function(t){$.ajax({url:"index.php?route=product/compare/add",type:"post",data:"product_id="+t,dataType:"json",success:function(t){$(".alert").remove(),t.success&&($("#content").parent().before('<div class="alert alert-success"><i class="fa fa-check-circle"></i> '+t.success+' <button type="button" class="close" data-dismiss="alert">&times;</button></div>'),$("#compare-total").html(t.total),$("html, body").animate({scrollTop:0},"slow"))},error:function(t,e,o){alert(o+"\r\n"+t.statusText+"\r\n"+t.responseText)}})},remove:function(){}};$(document).delegate(".agree","click",function(t){t.preventDefault(),$("#modal-agree").remove();var e=this;$.ajax({url:$(e).attr("href"),type:"get",dataType:"html",success:function(t){html='<div id="modal-agree" class="modal">',html+='  <div class="modal-dialog">',html+='    <div class="modal-content">',html+='      <div class="modal-header">',html+='  \t      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>',html+='        <h4 class="modal-title">'+$(e).text()+"</h4>",html+="      </div>",html+='      <div class="modal-body">'+t+"</div>",html+="    </div",html+="  </div>",html+="</div>",$("body").append(html),$("#modal-agree").modal("show")}})}),function(o){o.fn.autocomplete=function(t){return this.each(function(){this.timer=null,this.items=new Array,o.extend(this,t),o(this).attr("autocomplete","off"),o(this).on("focus",function(){this.request()}),o(this).on("blur",function(){setTimeout(function(t){t.hide()},200,this)}),o(this).on("keydown",function(t){switch(t.keyCode){case 27:this.hide();break;default:this.request()}}),this.click=function(t){t.preventDefault(),value=o(t.target).parent().attr("data-value"),value&&this.items[value]&&this.select(this.items[value])},this.show=function(){var t=o(this).position();o(this).siblings("ul.dropdown-menu").css({top:t.top+o(this).outerHeight(),left:t.left}),o(this).siblings("ul.dropdown-menu").show()},this.hide=function(){o(this).siblings("ul.dropdown-menu").hide()},this.request=function(){clearTimeout(this.timer),this.timer=setTimeout(function(t){t.source(o(t).val(),o.proxy(t.response,t))},200,this)},this.response=function(t){if(html="",t.length){for(i=0;i<t.length;i++)this.items[t[i].value]=t[i];for(i=0;i<t.length;i++)t[i].category||(html+='<li data-value="'+t[i].value+'"><a href="#">'+t[i].label+"</a></li>");var e=new Array;for(i=0;i<t.length;i++)t[i].category&&(e[t[i].category]||(e[t[i].category]=new Array,e[t[i].category].name=t[i].category,e[t[i].category].item=new Array),e[t[i].category].item.push(t[i]));for(i in e)for(html+='<li class="dropdown-header">'+e[i].name+"</li>",j=0;j<e[i].item.length;j++)html+='<li data-value="'+e[i].item[j].value+'"><a href="#">&nbsp;&nbsp;&nbsp;'+e[i].item[j].label+"</a></li>"}html?this.show():this.hide(),o(this).siblings("ul.dropdown-menu").html(html)},o(this).after('<ul class="dropdown-menu"></ul>'),o(this).siblings("ul.dropdown-menu").delegate("a","click",o.proxy(this.click,this))})}}(window.jQuery),$("select[name='recurring_id'], input[name=\"quantity\"]").change(function(){$.ajax({url:"index.php?route=product/product/getRecurringDescription",type:"post",data:$("input[name='product_id'], input[name='quantity'], select[name='recurring_id']"),dataType:"json",beforeSend:function(){$("#recurring-description").html("")},success:function(t){$(".alert, .text-danger").remove(),t.success&&$("#recurring-description").html(t.success)}})}),$("#button-cart").on("click",function(){$.ajax({url:"index.php?route=checkout/cart/add",type:"post",data:$("#product input[type='text'], #product input[type='hidden'], #product input[type='radio']:checked, #product input[type='checkbox']:checked, #product select, #product textarea"),dataType:"json",beforeSend:function(){$("#button-cart").button("loading")},complete:function(){$("#button-cart").button("reset")},success:function(t){if($(".alert, .text-danger").remove(),$(".form-group").removeClass("has-error"),t.error){if(t.error.option)for(i in t.error.option){var e=$("#input-option"+i.replace("_","-"));e.parent().hasClass("input-group")?e.parent().after('<div class="text-danger">'+t.error.option[i]+"</div>"):e.after('<div class="text-danger">'+t.error.option[i]+"</div>")}t.error.recurring&&$("select[name='recurring_id']").after('<div class="text-danger">'+t.error.recurring+"</div>"),$(".text-danger").parent().addClass("has-error")}t.success&&($(".breadcrumb").after('<div class="alert alert-success">'+t.success+'<button type="button" class="close" data-dismiss="alert">&times;</button></div>'),$("#cart > button").html('<span id="cart-total"><i class="fa fa-shopping-cart"></i> '+t.total+"</span>"),$("html, body").animate({scrollTop:0},"slow"),$("#cart > ul").load("index.php?route=common/cart/info ul li"))},error:function(t,e,o){alert(o+"\r\n"+t.statusText+"\r\n"+t.responseText)}})}),$("button[id^='button-upload']").on("click",function(){var e=this;$("#form-upload").remove(),$("body").prepend('<form enctype="multipart/form-data" id="form-upload" style="display: none;"><input type="file" name="file" /></form>'),$("#form-upload input[name='file']").trigger("click"),"undefined"!=typeof timer&&clearInterval(timer),timer=setInterval(function(){""!=$("#form-upload input[name='file']").val()&&(clearInterval(timer),$.ajax({url:"index.php?route=tool/upload",type:"post",dataType:"json",data:new FormData($("#form-upload")[0]),cache:!1,contentType:!1,processData:!1,beforeSend:function(){$(e).button("loading")},complete:function(){$(e).button("reset")},success:function(t){$(".text-danger").remove(),t.error&&$(e).parent().find("input").after('<div class="text-danger">'+t.error+"</div>"),t.success&&(alert(t.success),$(e).parent().find("input").val(t.code))},error:function(t,e,o){alert(o+"\r\n"+t.statusText+"\r\n"+t.responseText)}}))},500)}),$("#review").delegate(".pagination a","click",function(t){t.preventDefault(),$("#review").fadeOut("slow"),$("#review").load(this.href),$("#review").fadeIn("slow")}),$("#review").load("index.php?route=product/product/review&product_id=<?php echo $product_id; ?>"),$("#button-review").on("click",function(){$.ajax({url:"index.php?route=product/product/write&product_id=<?php echo $product_id; ?>",type:"post",dataType:"json",data:$("#form-review").serialize(),beforeSend:function(){$("#button-review").button("loading")},complete:function(){$("#button-review").button("reset")},success:function(t){$(".alert-success, .alert-danger").remove(),t.error&&$("#review").after('<div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> '+t.error+"</div>"),t.success&&($("#review").after('<div class="alert alert-success"><i class="fa fa-check-circle"></i> '+t.success+"</div>"),$("input[name='name']").val(""),$("textarea[name='text']").val(""),$("input[name='rating']:checked").prop("checked",!1))}}),grecaptcha.reset()}),$(document).ready(function(){var t=window.location.hash;if(t){var e=t.split("#")[1].split("-");for(i=0;i<e.length;i++)$("div.options").find('select option[value="'+e[i]+'"]').attr("selected",!0).trigger("select"),$("div.options").find('input[type="radio"][value="'+e[i]+'"]').attr("checked",!0).trigger("click")}}),$("#button-search").bind("click",function(){url="index.php?route=product/search";var t=$("#content input[name='search']").prop("value");t&&(url+="&search="+encodeURIComponent(t));var e=$("#content select[name='category_id']").prop("value");0<e&&(url+="&category_id="+encodeURIComponent(e)),$("#content input[name='sub_category']:checked").prop("value")&&(url+="&sub_category=true"),$("#content input[name='description']:checked").prop("value")&&(url+="&description=true"),location=url}),$("#content input[name='search']").bind("keydown",function(t){13==t.keyCode&&$("#button-search").trigger("click")}),$("select[name='category_id']").on("change",function(){"0"==this.value?$("input[name='sub_category']").prop("disabled",!0):$("input[name='sub_category']").prop("disabled",!1)}),$("select[name='category_id']").trigger("change");